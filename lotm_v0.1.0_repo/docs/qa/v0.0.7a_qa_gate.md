# v0.0.7a QA Gate

Date: 2026-02-11
Repo Fingerprint (docs/BUILD_INFO.json): 7ed9ff47c79753f14015cbffa0a86e19e75e68888cd3363d39cd0ba91c6aac53
APP_VERSION: v0.0.7a
SIM_VERSION: mvp_v0_1

Result: **CERTIFIABLE PASS**

## Commands (no dependency install)
- `npm run qa`

## What ran
This repo’s `npm run qa` is implemented as `node scripts/qaGate.js`.

In an environment without `node_modules` (no `vitest` binary), the gate correctly falls back to the dependency-free runner:
- `scripts/qaNoDeps.mjs`

This run completed successfully:
- Exit code: `0`
- Console: `qa_no_deps: PASS (passed 6/6)`

## Machine-readable artifacts
Written to `qa_artifacts/`:
- `qa_artifacts/v0.0.7a_no_deps_gate.json`
  - `ok: true`
  - `tests_run: 6`
  - `passed: 6`
  - `failed: 0`

## Coverage (no-deps gate)
The dependency-free gate executes these checks:

1) **Policy registry contract**
   - required policy IDs exist: `prudent-builder`, `builder-forward`, `builder-forward/buffered`
   - alias canonicalization works (`good-faith` → `prudent-builder`)
   - artifact-safe policy ID sanitizer works

2) **Builder-forward intent sanity**
   - builder-forward selects an actionable construction decision
   - when viable, first improvement is `field_rotation`

3) **Determinism (same seed + same policy)**
   - identical per-turn log hash for repeated runs

4) **Golden seeds (15 turns): prudent-builder**
   - invariants hold across the seed suite

5) **Golden seeds (15 turns): builder-forward**
   - invariants hold across the seed suite

6) **Bounded snapshots**
   - turn log snapshots do not include forbidden keys (especially `log`)

## Notes
- If `node_modules/.bin/vitest` is present, `scripts/qaGate.js` will run `vitest run --reporter=json` and write `qa_artifacts/vitest.json`.
- The vitest path is additionally hardened to **fail the gate if 0 tests are discovered**.
